<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Administrar Agentes Inmobiliarios</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script th:src="@{/js/alertScript.js}"></script>
    <script th:src="@{/js/agentScript.js}"></script>
</head>

<body>
<div class="container mt-5">
    <div th:if="${agent == null}">
        <h2 class="mb-4">Crear Agente Inmobiliario</h2>
        <form th:action="@{/agents/registrarAgent}" method="post" id="form-crear" class="form-crear">
            <div class="form-group">
                <label for="userName">Nombre de Usuario:</label>
                <input type="text" class="form-control" id="userName" name="userName" required>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" required>
            </div>
            <div class="form-group">
                <label for="primerApellido">Primer Apellido:</label>
                <input type="text" class="form-control" id="primerApellido" name="primerApellido" required>
            </div>
            <div class="form-group">
                <label for="segundoApellido">Segundo Apellido:</label>
                <input type="text" class="form-control" id="segundoApellido" name="segundoApellido" required>
            </div>
            <div class="form-group">
                <label for="idCard">ID Card:</label>
                <input type="text" class="form-control" id="idCard" name="idCard" required>
            </div>
            <div class="form-group">
                <label for="aditionalInformation">Información Adicional:</label>
                <input type="text" class="form-control" id="aditionalInformation" name="aditionalInformation" required>
            </div>
            <div class="form-group">
                <label for="correoElectronico">Correo Electrónico:</label>
                <input type="email" class="form-control" id="correoElectronico" name="correoElectronico" required>
            </div>
            <div class="form-group">
                <label for="numeroTelefono">Número de Teléfono:</label>
                <input type="text" class="form-control" id="numeroTelefono" name="numeroTelefono" required>
            </div>
            <button type="submit" class="btn btn-primary" onclick="validarCreacionAgent()">Crear</button>
            <button type="button" class="btn btn-secondary" onclick="ocultarForm()">Cancelar</button>
        </form>
        <div class="mt-3">
            <p id="texto_error" class="text-danger"></p>
        </div>
    </div>

    <div th:if="${agent != null}">
        <h2 class="mb-4">Editar Agente Inmobiliario</h2>
        <form class="editForm" th:action="@{/agents/actualizarAgent}" method="post">
            <input type="hidden" id="id" name="id" th:value="${agent[0]}">
            <div class="form-group">
                <label for="userName">Nombre de Usuario:</label>
                <input type="text" class="form-control" id="userName" name="userName" th:value="${agent[3]}" required>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" th:value="${agent[5]}" required>
            </div>
            <div class="form-group">
                <label for="primerApellido">Primer Apellido:</label>
                <input type="text" class="form-control" id="primerApellido" name="primerApellido" th:value="${agent[6]}" required>
            </div>
            <div class="form-group">
                <label for="segundoApellido">Segundo Apellido:</label>
                <input type="text" class="form-control" id="segundoApellido" name="segundoApellido" th:value="${agent[7]}" required>
            </div>
            <div class="form-group">
                <label for="idCard">ID Card:</label>
                <input type="text" class="form-control" id="idCard" name="idCard" th:value="${agent[8]}" required>
            </div>
            <div class="form-group">
                <label for="aditionalInformation">Información Adicional:</label>
                <input type="text" class="form-control" id="aditionalInformation" name="aditionalInformation" th:value="${agent[11]}" required>
            </div>
            <div class="form-group">
                <label for="correoElectronico">Correo Electrónico:</label>
                <input type="email" class="form-control" id="correoElectronico" name="correoElectronico" th:value="${agent[9]}" required>
            </div>
            <div class="form-group">
                <label for="numeroTelefono">Número de Teléfono:</label>
                <input type="text" class="form-control" id="numeroTelefono" name="numeroTelefono" th:value="${agent[10]}" required>
            </div>
            <div class="form-group">
                <label for="status">Estado:</label>
                <select class="form-control" id="status" name="status" required>
                    <option value="1" th:selected="${agent[1] == 1}">Activo</option>
                    <option value="0" th:selected="${agent[1] == 0}">Inactivo</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary" onclick="editarAgent()">Actualizar</button>
            <button type="button" class="btn btn-secondary" onclick="ocultarForm()">Cancelar</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        desplegarForm();
    });
</script>
</body>
</html>
